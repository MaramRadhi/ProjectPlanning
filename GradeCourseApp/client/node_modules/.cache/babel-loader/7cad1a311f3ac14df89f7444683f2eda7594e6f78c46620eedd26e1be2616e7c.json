{"ast":null,"code":"import { useContext, useMemo } from 'react';\nimport DataProviderContext from './DataProviderContext';\nimport { defaultDataProvider } from './defaultDataProvider';\nimport validateResponseFormat from './validateResponseFormat';\nimport useLogoutIfAccessDenied from '../auth/useLogoutIfAccessDenied';\nimport { reactAdminFetchActions } from './dataFetchActions';\n/**\n * Hook for getting a dataProvider\n *\n * Gets a dataProvider object, which behaves just like the real dataProvider\n * (same methods returning a Promise). But it's actually a Proxy object,\n * which validates the response format, and logs the user out upon error\n * if authProvider.checkError() rejects.\n *\n * @return dataProvider\n *\n * @example Basic usage\n *\n * import * as React from 'react';\n * import { useState } from 'react';\n * import { useDataProvider } from 'react-admin';\n *\n * const PostList = () => {\n *      const [posts, setPosts] = useState([])\n *      const dataProvider = useDataProvider();\n *      useEffect(() => {\n *          dataProvider.getList('posts', { filter: { status: 'pending' }})\n *            .then(({ data }) => setPosts(data));\n *      }, [])\n *\n *      return (\n *          <Fragment>\n *              {posts.map((post, key) => <PostDetail post={post} key={key} />)}\n *          </Fragment>\n *     );\n * }\n *\n * @example Handling all states (loading, error, success)\n *\n * import { useState, useEffect } from 'react';\n * import { useDataProvider } from 'react-admin';\n *\n * const UserProfile = ({ userId }) => {\n *     const dataProvider = useDataProvider();\n *     const [user, setUser] = useState();\n *     const [loading, setLoading] = useState(true);\n *     const [error, setError] = useState();\n *     useEffect(() => {\n *         dataProvider.getOne('users', { id: userId })\n *             .then(({ data }) => {\n *                 setUser(data);\n *                 setLoading(false);\n *             })\n *             .catch(error => {\n *                 setError(error);\n *                 setLoading(false);\n *             })\n *     }, []);\n *\n *     if (loading) return <Loading />;\n *     if (error) return <Error />\n *     if (!user) return null;\n *\n *     return (\n *         <ul>\n *             <li>Name: {user.name}</li>\n *             <li>Email: {user.email}</li>\n *         </ul>\n *     )\n * }\n */\nvar arrayReturnTypes = ['getList', 'getMany', 'getManyReference'];\nexport var useDataProvider = function () {\n  var dataProvider = useContext(DataProviderContext) || defaultDataProvider;\n  var logoutIfAccessDenied = useLogoutIfAccessDenied();\n  var dataProviderProxy = useMemo(function () {\n    return new Proxy(dataProvider, {\n      get: function (target, name) {\n        if (typeof name === 'symbol' || name === 'then') {\n          return;\n        }\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          var type = name.toString();\n          if (typeof dataProvider[type] !== 'function') {\n            throw new Error(\"Unknown dataProvider function: \".concat(type));\n          }\n          try {\n            return dataProvider[type].apply(dataProvider, args).then(function (response) {\n              if (process.env.NODE_ENV !== 'production' && reactAdminFetchActions.includes(type)) {\n                validateResponseFormat(response, type);\n              }\n              return response;\n            }).catch(function (error) {\n              if (process.env.NODE_ENV !== 'production') {\n                console.error(error);\n              }\n              return logoutIfAccessDenied(error).then(function (loggedOut) {\n                if (loggedOut) return {\n                  data: arrayReturnTypes.includes(type) ? [] : {}\n                };\n                throw error;\n              });\n            });\n          } catch (e) {\n            if (process.env.NODE_ENV !== 'production') {\n              console.error(e);\n            }\n            throw new Error('The dataProvider threw an error. It should return a rejected Promise instead.');\n          }\n        };\n      }\n    });\n  }, [dataProvider, logoutIfAccessDenied]);\n  return dataProviderProxy;\n};","map":{"version":3,"names":["useContext","useMemo","DataProviderContext","defaultDataProvider","validateResponseFormat","useLogoutIfAccessDenied","reactAdminFetchActions","arrayReturnTypes","useDataProvider","dataProvider","logoutIfAccessDenied","dataProviderProxy","Proxy","get","target","name","args","_i","arguments","length","type","toString","Error","concat","apply","then","response","process","env","NODE_ENV","includes","catch","error","console","loggedOut","data","e"],"sources":["/Users/imrun10/Documents/GitHub/GradeCourseApp/client/node_modules/ra-core/src/dataProvider/useDataProvider.ts"],"sourcesContent":["import { useContext, useMemo } from 'react';\n\nimport DataProviderContext from './DataProviderContext';\nimport { defaultDataProvider } from './defaultDataProvider';\nimport validateResponseFormat from './validateResponseFormat';\nimport { DataProvider } from '../types';\nimport useLogoutIfAccessDenied from '../auth/useLogoutIfAccessDenied';\nimport { reactAdminFetchActions } from './dataFetchActions';\n\n/**\n * Hook for getting a dataProvider\n *\n * Gets a dataProvider object, which behaves just like the real dataProvider\n * (same methods returning a Promise). But it's actually a Proxy object,\n * which validates the response format, and logs the user out upon error\n * if authProvider.checkError() rejects.\n *\n * @return dataProvider\n *\n * @example Basic usage\n *\n * import * as React from 'react';\n * import { useState } from 'react';\n * import { useDataProvider } from 'react-admin';\n *\n * const PostList = () => {\n *      const [posts, setPosts] = useState([])\n *      const dataProvider = useDataProvider();\n *      useEffect(() => {\n *          dataProvider.getList('posts', { filter: { status: 'pending' }})\n *            .then(({ data }) => setPosts(data));\n *      }, [])\n *\n *      return (\n *          <Fragment>\n *              {posts.map((post, key) => <PostDetail post={post} key={key} />)}\n *          </Fragment>\n *     );\n * }\n *\n * @example Handling all states (loading, error, success)\n *\n * import { useState, useEffect } from 'react';\n * import { useDataProvider } from 'react-admin';\n *\n * const UserProfile = ({ userId }) => {\n *     const dataProvider = useDataProvider();\n *     const [user, setUser] = useState();\n *     const [loading, setLoading] = useState(true);\n *     const [error, setError] = useState();\n *     useEffect(() => {\n *         dataProvider.getOne('users', { id: userId })\n *             .then(({ data }) => {\n *                 setUser(data);\n *                 setLoading(false);\n *             })\n *             .catch(error => {\n *                 setError(error);\n *                 setLoading(false);\n *             })\n *     }, []);\n *\n *     if (loading) return <Loading />;\n *     if (error) return <Error />\n *     if (!user) return null;\n *\n *     return (\n *         <ul>\n *             <li>Name: {user.name}</li>\n *             <li>Email: {user.email}</li>\n *         </ul>\n *     )\n * }\n */\n\nconst arrayReturnTypes = ['getList', 'getMany', 'getManyReference'];\n\nexport const useDataProvider = <\n    TDataProvider extends DataProvider = DataProvider\n>(): TDataProvider => {\n    const dataProvider = ((useContext(DataProviderContext) ||\n        defaultDataProvider) as unknown) as TDataProvider;\n\n    const logoutIfAccessDenied = useLogoutIfAccessDenied();\n\n    const dataProviderProxy = useMemo(() => {\n        return new Proxy(dataProvider, {\n            get: (target, name) => {\n                if (typeof name === 'symbol' || name === 'then') {\n                    return;\n                }\n                return (...args) => {\n                    const type = name.toString();\n\n                    if (typeof dataProvider[type] !== 'function') {\n                        throw new Error(\n                            `Unknown dataProvider function: ${type}`\n                        );\n                    }\n\n                    try {\n                        return dataProvider[type]\n                            .apply(dataProvider, args)\n                            .then(response => {\n                                if (\n                                    process.env.NODE_ENV !== 'production' &&\n                                    reactAdminFetchActions.includes(type)\n                                ) {\n                                    validateResponseFormat(response, type);\n                                }\n                                return response;\n                            })\n                            .catch(error => {\n                                if (process.env.NODE_ENV !== 'production') {\n                                    console.error(error);\n                                }\n                                return logoutIfAccessDenied(error).then(\n                                    loggedOut => {\n                                        if (loggedOut)\n                                            return {\n                                                data: arrayReturnTypes.includes(\n                                                    type\n                                                )\n                                                    ? []\n                                                    : {},\n                                            };\n                                        throw error;\n                                    }\n                                );\n                            });\n                    } catch (e) {\n                        if (process.env.NODE_ENV !== 'production') {\n                            console.error(e);\n                        }\n                        throw new Error(\n                            'The dataProvider threw an error. It should return a rejected Promise instead.'\n                        );\n                    }\n                };\n            },\n        });\n    }, [dataProvider, logoutIfAccessDenied]);\n\n    return dataProviderProxy;\n};\n"],"mappings":"AAAA,SAASA,UAAU,EAAEC,OAAO,QAAQ,OAAO;AAE3C,OAAOC,mBAAmB,MAAM,uBAAuB;AACvD,SAASC,mBAAmB,QAAQ,uBAAuB;AAC3D,OAAOC,sBAAsB,MAAM,0BAA0B;AAE7D,OAAOC,uBAAuB,MAAM,iCAAiC;AACrE,SAASC,sBAAsB,QAAQ,oBAAoB;AAE3D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEA,IAAMC,gBAAgB,GAAG,CAAC,SAAS,EAAE,SAAS,EAAE,kBAAkB,CAAC;AAEnE,OAAO,IAAMC,eAAe,GAAG,SAAAA,CAAA;EAG3B,IAAMC,YAAY,GAAKT,UAAU,CAACE,mBAAmB,CAAC,IAClDC,mBAAiD;EAErD,IAAMO,oBAAoB,GAAGL,uBAAuB,EAAE;EAEtD,IAAMM,iBAAiB,GAAGV,OAAO,CAAC;IAC9B,OAAO,IAAIW,KAAK,CAACH,YAAY,EAAE;MAC3BI,GAAG,EAAE,SAAAA,CAACC,MAAM,EAAEC,IAAI;QACd,IAAI,OAAOA,IAAI,KAAK,QAAQ,IAAIA,IAAI,KAAK,MAAM,EAAE;UAC7C;;QAEJ,OAAO;UAAC,IAAAC,IAAA;eAAA,IAAAC,EAAA,IAAO,EAAPA,EAAA,GAAAC,SAAA,CAAAC,MAAO,EAAPF,EAAA,EAAO;YAAPD,IAAA,CAAAC,EAAA,IAAAC,SAAA,CAAAD,EAAA;;UACJ,IAAMG,IAAI,GAAGL,IAAI,CAACM,QAAQ,EAAE;UAE5B,IAAI,OAAOZ,YAAY,CAACW,IAAI,CAAC,KAAK,UAAU,EAAE;YAC1C,MAAM,IAAIE,KAAK,CACX,kCAAAC,MAAA,CAAkCH,IAAI,CAAE,CAC3C;;UAGL,IAAI;YACA,OAAOX,YAAY,CAACW,IAAI,CAAC,CACpBI,KAAK,CAACf,YAAY,EAAEO,IAAI,CAAC,CACzBS,IAAI,CAAC,UAAAC,QAAQ;cACV,IACIC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,IACrCvB,sBAAsB,CAACwB,QAAQ,CAACV,IAAI,CAAC,EACvC;gBACEhB,sBAAsB,CAACsB,QAAQ,EAAEN,IAAI,CAAC;;cAE1C,OAAOM,QAAQ;YACnB,CAAC,CAAC,CACDK,KAAK,CAAC,UAAAC,KAAK;cACR,IAAIL,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,EAAE;gBACvCI,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;;cAExB,OAAOtB,oBAAoB,CAACsB,KAAK,CAAC,CAACP,IAAI,CACnC,UAAAS,SAAS;gBACL,IAAIA,SAAS,EACT,OAAO;kBACHC,IAAI,EAAE5B,gBAAgB,CAACuB,QAAQ,CAC3BV,IAAI,CACP,GACK,EAAE,GACF;iBACT;gBACL,MAAMY,KAAK;cACf,CAAC,CACJ;YACL,CAAC,CAAC;WACT,CAAC,OAAOI,CAAC,EAAE;YACR,IAAIT,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,EAAE;cACvCI,OAAO,CAACD,KAAK,CAACI,CAAC,CAAC;;YAEpB,MAAM,IAAId,KAAK,CACX,+EAA+E,CAClF;;QAET,CAAC;MACL;KACH,CAAC;EACN,CAAC,EAAE,CAACb,YAAY,EAAEC,oBAAoB,CAAC,CAAC;EAExC,OAAOC,iBAAiB;AAC5B,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}