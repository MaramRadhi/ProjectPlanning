{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport { useInfiniteQuery, useQueryClient } from 'react-query';\nimport { useDataProvider } from './useDataProvider';\n/**\n * Call the dataProvider.getList() method and return the resolved result\n * as well as the loading state. The return from useInfiniteGetList is equivalent to the return from react-hook form useInfiniteQuery.\n *\n * @see https://react-query-v3.tanstack.com/reference/useInfiniteQuery\n *\n *\n * This hook will return the cached result when called a second time\n * with the same parameters, until the response arrives.\n *\n * @param {string} resource The resource name, e.g. 'posts'\n * @param {Params} params The getList parameters { pagination, sort, filter, meta }\n * @param {Object} options Options object to pass to the queryClient.\n * May include side effects to be executed upon success or failure, e.g. { onSuccess: () => { fetchNextPage(); } }\n *\n * @typedef Params\n * @prop params.pagination The request pagination { page, perPage }, e.g. { page: 1, perPage: 10 }\n * @prop params.sort The request sort { field, order }, e.g. { field: 'id', order: 'DESC' }\n * @prop params.filter The request filters, e.g. { title: 'hello, world' }\n * @prop params.meta Optional meta parameters\n *\n * @returns The current request state. Destructure as { data, total, error, isLoading, isSuccess, hasNextPage, fetchNextPage }.\n *\n * @example\n *\n * import { useInfinteGetList } from 'react-admin';\n *\n * const LatestNews = () => {\n *     const { data, total, isLoading, error, hasNextPage, fetchNextPage } = useInfiniteGetList(\n *         'posts',\n *         { pagination: { page: 1, perPage: 10 }, sort: { field: 'published_at', order: 'DESC' } }\n *     );\n *     if (isLoading) { return <Loading />; }\n *     if (error) { return <p>ERROR</p>; }\n *     return (\n *        <>\n *            <ul>\n *                {data?.pages.map(page => {\n *                    return page.data.map(post => (\n *                        <li key={post.id}>{post.title}</li>\n *                    ));\n *                })}\n *            </ul>\n *            <div>\n *                <button disabled={!hasNextPage} onClick={() => fetchNextPage()}>\n *                    Fetch next page\n *                </button>\n *            </div>\n *        </>\n *    );\n * };\n */\nexport var useInfiniteGetList = function (resource, params, options) {\n  var _a, _b;\n  if (params === void 0) {\n    params = {};\n  }\n  var _c = params.pagination,\n    pagination = _c === void 0 ? {\n      page: 1,\n      perPage: 25\n    } : _c,\n    _d = params.sort,\n    sort = _d === void 0 ? {\n      field: 'id',\n      order: 'DESC'\n    } : _d,\n    _e = params.filter,\n    filter = _e === void 0 ? {} : _e,\n    meta = params.meta;\n  var dataProvider = useDataProvider();\n  var queryClient = useQueryClient();\n  var result = useInfiniteQuery([resource, 'getList', {\n    pagination: pagination,\n    sort: sort,\n    filter: filter,\n    meta: meta\n  }], function (_a) {\n    var _b = _a.pageParam,\n      pageParam = _b === void 0 ? pagination.page : _b;\n    return dataProvider.getList(resource, {\n      pagination: {\n        page: pageParam,\n        perPage: pagination.perPage\n      },\n      sort: sort,\n      filter: filter,\n      meta: meta\n    }).then(function (_a) {\n      var data = _a.data,\n        pageInfo = _a.pageInfo,\n        total = _a.total;\n      return {\n        data: data,\n        total: total,\n        pageParam: pageParam,\n        pageInfo: pageInfo\n      };\n    });\n  }, __assign(__assign({\n    onSuccess: function (data) {\n      // optimistically populate the getOne cache\n      data.pages.forEach(function (page) {\n        page.data.forEach(function (record) {\n          queryClient.setQueryData([resource, 'getOne', {\n            id: String(record.id),\n            meta: meta\n          }], function (oldRecord) {\n            return oldRecord !== null && oldRecord !== void 0 ? oldRecord : record;\n          });\n        });\n      });\n    }\n  }, options), {\n    getNextPageParam: function (lastLoadedPage) {\n      if (lastLoadedPage.pageInfo) {\n        return lastLoadedPage.pageInfo.hasNextPage ? lastLoadedPage.pageParam + 1 : undefined;\n      }\n      var totalPages = Math.ceil((lastLoadedPage.total || 0) / pagination.perPage);\n      return lastLoadedPage.pageParam < totalPages ? Number(lastLoadedPage.pageParam) + 1 : undefined;\n    },\n    getPreviousPageParam: function (lastLoadedPage) {\n      if (lastLoadedPage.pageInfo) {\n        return lastLoadedPage.pageInfo.hasPreviousPage ? lastLoadedPage.pageParam - 1 : undefined;\n      }\n      return lastLoadedPage.pageParam === 1 ? undefined : lastLoadedPage.pageParam - 1;\n    }\n  }));\n  return result.data ? __assign(__assign({}, result), {\n    data: result.data,\n    total: ((_b = (_a = result.data) === null || _a === void 0 ? void 0 : _a.pages[0]) === null || _b === void 0 ? void 0 : _b.total) || 0\n  }) : result;\n};","map":{"version":3,"names":["useInfiniteQuery","useQueryClient","useDataProvider","useInfiniteGetList","resource","params","options","_c","pagination","page","perPage","_d","sort","field","order","_e","filter","meta","dataProvider","queryClient","result","_a","_b","pageParam","getList","then","data","pageInfo","total","__assign","onSuccess","pages","forEach","record","setQueryData","id","String","oldRecord","getNextPageParam","lastLoadedPage","hasNextPage","undefined","totalPages","Math","ceil","Number","getPreviousPageParam","hasPreviousPage"],"sources":["/Users/imrun10/Documents/GitHub/GradeCourseApp/client/node_modules/ra-core/src/dataProvider/useInfiniteGetList.ts"],"sourcesContent":["import {\n    useInfiniteQuery,\n    UseInfiniteQueryOptions,\n    UseInfiniteQueryResult,\n    useQueryClient,\n} from 'react-query';\n\nimport { RaRecord, GetListParams, GetInfiniteListResult } from '../types';\nimport { useDataProvider } from './useDataProvider';\n\n/**\n * Call the dataProvider.getList() method and return the resolved result\n * as well as the loading state. The return from useInfiniteGetList is equivalent to the return from react-hook form useInfiniteQuery.\n *\n * @see https://react-query-v3.tanstack.com/reference/useInfiniteQuery\n *\n *\n * This hook will return the cached result when called a second time\n * with the same parameters, until the response arrives.\n *\n * @param {string} resource The resource name, e.g. 'posts'\n * @param {Params} params The getList parameters { pagination, sort, filter, meta }\n * @param {Object} options Options object to pass to the queryClient.\n * May include side effects to be executed upon success or failure, e.g. { onSuccess: () => { fetchNextPage(); } }\n *\n * @typedef Params\n * @prop params.pagination The request pagination { page, perPage }, e.g. { page: 1, perPage: 10 }\n * @prop params.sort The request sort { field, order }, e.g. { field: 'id', order: 'DESC' }\n * @prop params.filter The request filters, e.g. { title: 'hello, world' }\n * @prop params.meta Optional meta parameters\n *\n * @returns The current request state. Destructure as { data, total, error, isLoading, isSuccess, hasNextPage, fetchNextPage }.\n *\n * @example\n *\n * import { useInfinteGetList } from 'react-admin';\n *\n * const LatestNews = () => {\n *     const { data, total, isLoading, error, hasNextPage, fetchNextPage } = useInfiniteGetList(\n *         'posts',\n *         { pagination: { page: 1, perPage: 10 }, sort: { field: 'published_at', order: 'DESC' } }\n *     );\n *     if (isLoading) { return <Loading />; }\n *     if (error) { return <p>ERROR</p>; }\n *     return (\n *        <>\n *            <ul>\n *                {data?.pages.map(page => {\n *                    return page.data.map(post => (\n *                        <li key={post.id}>{post.title}</li>\n *                    ));\n *                })}\n *            </ul>\n *            <div>\n *                <button disabled={!hasNextPage} onClick={() => fetchNextPage()}>\n *                    Fetch next page\n *                </button>\n *            </div>\n *        </>\n *    );\n * };\n */\n\nexport const useInfiniteGetList = <RecordType extends RaRecord = any>(\n    resource: string,\n    params: Partial<GetListParams> = {},\n    options?: UseInfiniteQueryOptions<GetInfiniteListResult<RecordType>, Error>\n): UseInfiniteGetListHookValue<RecordType> => {\n    const {\n        pagination = { page: 1, perPage: 25 },\n        sort = { field: 'id', order: 'DESC' },\n        filter = {},\n        meta,\n    } = params;\n    const dataProvider = useDataProvider();\n    const queryClient = useQueryClient();\n\n    const result = useInfiniteQuery<\n        GetInfiniteListResult<RecordType>,\n        Error,\n        GetInfiniteListResult<RecordType>\n    >(\n        [resource, 'getList', { pagination, sort, filter, meta }],\n        ({ pageParam = pagination.page }) =>\n            dataProvider\n                .getList<RecordType>(resource, {\n                    pagination: {\n                        page: pageParam,\n                        perPage: pagination.perPage,\n                    },\n                    sort,\n                    filter,\n                    meta,\n                })\n                .then(({ data, pageInfo, total }) => ({\n                    data,\n                    total,\n                    pageParam,\n                    pageInfo,\n                })),\n        {\n            onSuccess: data => {\n                // optimistically populate the getOne cache\n                data.pages.forEach(page => {\n                    page.data.forEach(record => {\n                        queryClient.setQueryData(\n                            [\n                                resource,\n                                'getOne',\n                                { id: String(record.id), meta },\n                            ],\n                            oldRecord => oldRecord ?? record\n                        );\n                    });\n                });\n            },\n            ...options,\n            getNextPageParam: lastLoadedPage => {\n                if (lastLoadedPage.pageInfo) {\n                    return lastLoadedPage.pageInfo.hasNextPage\n                        ? lastLoadedPage.pageParam + 1\n                        : undefined;\n                }\n                const totalPages = Math.ceil(\n                    (lastLoadedPage.total || 0) / pagination.perPage\n                );\n\n                return lastLoadedPage.pageParam < totalPages\n                    ? Number(lastLoadedPage.pageParam) + 1\n                    : undefined;\n            },\n            getPreviousPageParam: lastLoadedPage => {\n                if (lastLoadedPage.pageInfo) {\n                    return lastLoadedPage.pageInfo.hasPreviousPage\n                        ? lastLoadedPage.pageParam - 1\n                        : undefined;\n                }\n\n                return lastLoadedPage.pageParam === 1\n                    ? undefined\n                    : lastLoadedPage.pageParam - 1;\n            },\n        }\n    );\n\n    return (result.data\n        ? {\n              ...result,\n              data: result.data,\n              total: result.data?.pages[0]?.total || 0,\n          }\n        : result) as UseInfiniteQueryResult<\n        GetInfiniteListResult<RecordType>,\n        Error\n    > & {\n        total?: number;\n    };\n};\n\nexport type UseInfiniteGetListHookValue<\n    RecordType extends RaRecord = any\n> = UseInfiniteQueryResult<GetInfiniteListResult<RecordType>, Error> & {\n    total?: number;\n    pageParam?: number;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}