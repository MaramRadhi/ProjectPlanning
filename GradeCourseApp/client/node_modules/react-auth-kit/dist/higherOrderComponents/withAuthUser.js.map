{"version":3,"file":"withAuthUser.js","sources":["../../src/higherOrderComponents/withAuthUser.tsx"],"sourcesContent":["/**\n * @author Arkadip Bhattacharya <in2arkadipb13@gmail.com>\n * @fileoverview Authentication User <Higher Order Component>\n * @copyright Arkadip Bhattacharya 2020\n *\n * Copyright 2020 Arkadip Bhattacharya\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as React from 'react';\nimport {AuthContextConsumer} from '../AuthContext';\nimport {AuthStateUserObject} from '../types';\nimport {AuthKitError} from '../errors';\nimport {isAuthenticated} from '../utils/utils';\n\n/**\n * @interface withAuthProps\n */\ninterface withAuthProps {\n    authState: AuthStateUserObject| null\n}\n\n/**\n * @function\n * @name withAuthUser\n * @description Inject Authenticated User's state inside the Component's Prop\n * @param Component\n */\nfunction withAuthUser<P extends withAuthProps>(\n    Component: React.ComponentType<P>,\n): React.FunctionComponent<P> {\n  return (props: P)=>{\n    return (\n      <AuthContextConsumer>\n        {(context) => {\n          if (context === null) {\n            throw new\n            AuthKitError('Auth Provider is missing. ' +\n              'Please add the AuthProvider before Router');\n          }\n          if (context.authState.auth && isAuthenticated(context.authState)) {\n            return (\n              <Component {...props} authState={context.authState.userState}/>\n            );\n          } else {\n            return (\n              <Component {...props} authState={null}/>\n            );\n          }\n        }}\n      </AuthContextConsumer>\n    );\n  };\n}\n/**\n * @exports withAuthUser\n */\nexport default withAuthUser;\n"],"names":[],"mappings":";;;;;;AAgCA;;;;;AAKG;AACH,SAAS,YAAY,CACjB,SAAiC,EAAA;AAEnC,IAAA,OAAO,UAAC,KAAQ,EAAA;AACd,QAAA,QACE,KAAA,CAAA,aAAA,CAAC,mBAAmB,EAAA,IAAA,EACjB,UAAC,OAAO,EAAA;YACP,IAAI,OAAO,KAAK,IAAI,EAAE;gBACpB,MAAM,IACN,YAAY,CAAC,4BAA4B;AACvC,oBAAA,2CAA2C,CAAC,CAAC;AAChD,aAAA;AACD,YAAA,IAAI,OAAO,CAAC,SAAS,CAAC,IAAI,IAAI,eAAe,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE;AAChE,gBAAA,QACE,KAAA,CAAA,aAAA,CAAC,SAAS,EAAA,QAAA,CAAA,EAAA,EAAK,KAAK,EAAE,EAAA,SAAS,EAAE,OAAO,CAAC,SAAS,CAAC,SAAS,EAAA,CAAA,CAAG,EAC/D;AACH,aAAA;AAAM,iBAAA;gBACL,QACE,KAAC,CAAA,aAAA,CAAA,SAAS,EAAK,QAAA,CAAA,EAAA,EAAA,KAAK,EAAE,EAAA,SAAS,EAAE,IAAI,EAAG,CAAA,CAAA,EACxC;AACH,aAAA;SACF,CACmB,EACtB;AACJ,KAAC,CAAC;AACJ;;;;"}